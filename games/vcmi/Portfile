# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
PortSystem          1.0
PortGroup           LegacySupport 1.0
PortGroup			cmake 1.1
name                vcmi

fetch.type          git
git.url             https://github.com/vcmi/vcmi.git
   
post-fetch {
       system -W ${worksrcpath} "git submodule update --init --recursive"
   }

version             1.3
revision            1
categories          games
license             GPL-2.0
maintainers         nomaintainer
description         Open-source engine for Heroes of Might and Magic III .
homepage            https://vcmi.eu/

platform darwin 9 {
	compiler.whitelist		macports-gcc-7
}


depends_build-append \
					port:cmake


## qt4 is not required unless the launcher is enabled via configure args.  
## VCMI requires >QT 5.5 so there is no real reason to ever 
## enable this on powerpc as QT5 doesn't build.

depends_lib-append \
                    port:qt4-mac \
					port:libsdl2_ttf \
                    port:libsdl2_mixer \
                    port:libsdl2_image \
                    port:libunistring \
                    port:libsdl2 \
                    port:minizip \
                    port:ffmpeg \
                    port:boost181 \
					port:tbb
                
					
##cmake stuff

cmake.build_type	Release

configure.args-append	    -DENABLE_LAUNCHER=OFF
#From VCMI Docs "cmake -S . -B [BUILD_DIR[ -D CMAKE_BUILD_TYPE=Release -D "CMAKE_PREFIX_PATH=($prefix)""
